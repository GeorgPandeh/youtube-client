!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n="AIzaSyBgzlDXbLHNlk40nmYuFitcIaJL0AjYzW4";var s={searchApiPath:(t,e)=>`https://www.googleapis.com/youtube/v3/search?key=${n}&part=snippet&maxResults=${e}&q=${t}`,videoApiPath:t=>`https://www.googleapis.com/youtube/v3/videos?id=${t}&key=${n}&part=snippet,contentDetails,statistics,status`,videoPath:"https://www.youtube.com/watch?v="};class a{constructor(t){this.content=t,this.buttonSearchatNumber=t=>t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),this.count=0}videoLayout(t,e){t.items.forEach((i,n)=>{const a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),d=document.createElement("img"),c=document.createElement("p"),h=document.createElement("p"),l=document.createElement("p"),u=document.createElement("p"),p=document.createElement("div"),m=document.createElement("a");a.classList.add("video-item"),r.classList.add("video-info"),c.classList.add("author"),h.classList.add("date"),l.classList.add("watch-number"),u.classList.add("description"),p.classList.add("title"),d.classList.add("image-preview"),m.href=s.videoPath+i.id,m.target="_blank",m.classList.add("link"),d.src=i.snippet.thumbnails.medium.url,c.innerHTML=`<i class='fas fa-male' id='person'>\t${i.snippet.channelTitle}</i>`,h.innerHTML=`<i class='far fa-calendar-alt' id='calendar'>\t${i.snippet.publishedAt.slice(0,10)}</i>`,l.innerHTML=`<i class='far fa-eye' id='view'>\t${this.buttonSearchatNumber(e[n].statistics.viewCount)}</i>`,u.innerHTML=i.snippet.description,this.content.appendChild(a),a.appendChild(m),m.appendChild(o),o.appendChild(p),o.appendChild(d),p.appendChild(document.createTextNode(i.snippet.title)),a.appendChild(r),r.appendChild(c),r.appendChild(h),r.appendChild(l),r.appendChild(u),this.count+=t.items.length,this.content.style.width=`${300*this.count}px`})}}class o{constructor(){this.container=document.querySelector(".container"),this.content=document.querySelector(".content"),this.search=document.querySelector(".search-input"),this.pageToken="",this.viewCount=[],this.maxResult=15,this.videoCounter=0,this.videoSize=300,this.visibleVideoItems=4,this.firstWheelRequest=!1}initialize(){const t=document.createElement("input");t.classList.add("search-input");const e=document.createElement("button");e.classList.add("submit");const i=document.createElement("div");i.classList.add("content"),t.setAttribute("type","text"),t.setAttribute("placeholder","Search"),e.innerHTML="submit",this.container.appendChild(t),this.container.appendChild(e),this.container.appendChild(i),this.search=t,this.content=i,this.addListener(e)}addListener(t){t.addEventListener("click",this.buttonSearchEvent.bind(this)),this.content.addEventListener("wheel",this.wheelEvent.bind(this))}resetTransformation(t){t.deltaY>0?this.content.style.transform+="translateX(-100px)":t.deltaY<0?this.content.style.transform+="translateX(100px)":this.content.style.transform="translateX(0px)"}getStatistics(t){const e=[];return t.items.forEach(t=>{t.id.videoId&&e.push(t.id.videoId)}),this.videoCounter=e.length,e.join(",")}statisticsRequest(t,e){fetch(s.videoApiPath(this.getStatistics(t))).then(t=>t.json()).then(t=>{this.viewCount=t.items,e&&this.deleteContent(),new a(this.content).videoLayout(t,this.viewCount)})}deleteContent(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild),this.videoCounter=0,this.firstWheelRequest=!1}buttonSearchEvent(t){this.resetTransformation.bind(null,t),fetch(s.searchApiPath(this.search.value,this.maxResult)).then(t=>t.json()).then(t=>{t.nextPageToken&&(this.pageToken=t.nextPageToken);this.statisticsRequest(t,!0)}).catch(t=>{throw new Error(t)})}wheelEvent(t){if(this.content.firstChild){const e=window.getComputedStyle(this.content).transform.split(",")[4];if(t.deltaY>0){this.resetTransformation(t);let i=this.videoSize*this.videoCounter-this.videoSize*this.visibleVideoItems*2;this.firstWheelRequest&&(i+=this.videoSize*this.visibleVideoItems),this.pageToken&&e%i==0&&e<-100&&fetch(`${s.searchApiPath(this.search.value,this.maxResult)}&pageToken=${this.pageToken}`).then(t=>t.json()).then(t=>{this.pageToken=t.nextPageToken,this.firstWheelRequest=!0,this.statisticsRequest(t)}).catch(t=>{throw new Error(t)})}else t.deltaY<0&&e<0&&this.resetTransformation(t);return!1}return!1}}window.onload=()=>{(new o).initialize()}}]);